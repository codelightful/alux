var Alux=function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function a(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,i(e,t,"get"))}function l(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,i(e,t,"set"),r),r}function i(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var s={};function u(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}s.set=function(e,t,r){if("string"!=typeof e)throw new Error("alux.cookies.set.invalid_name");if("number"!=typeof r)throw new Error("alux.cookies.set.invalid_timespan");var n=new Date;n.setTime(n.getTime()+1e3*r);var o=u(e)+"="+t+"; expires="+n.toGMTString()+"; path=/";document.cookie=o},s.get=function(e){if("string"!=typeof e)throw new Error("alux.cookies.get.invalid_name");for(var t=document.cookie.split(";"),r=0;r<t.length;r++){var n=u(t[r]);if(n){var o=n.split("=");if(u(o[0])===e)return o[1]}}return null};var c={},v={loggers:{},levels:{fatal:{value:10,color:"#ff4444",label:"FATAL"},error:{value:20,color:"#ff4444",label:"ERROR"},warn:{value:30,color:"#ff8800",label:"WARNING"},info:{value:40,color:"#0099cc",label:"INFO"},debug:{value:50,color:"#3E4551",label:"DEBUG"},trace:{value:60,color:"#3E4551",label:"TRACE"}}},f=s.get("alux.logger.level");function d(e,t,r,n){if(t.value>=r.value){for(var o,a=arguments.length,l=new Array(a>4?a-4:0),i=4;i<a;i++)l[i-4]=arguments[i];(o=console).log.apply(o,["%c["+r.label+"]["+e+"]: "+n].concat(["color: "+r.color].concat(l)))}}f?(v.globalLevel=v.levels[f],v.globalLevel||(v.globalLevel=v.levels.warn)):v.globalLevel=v.levels.warn;var h=new WeakMap,g=new WeakMap,m=function(){function e(t){r(this,e),h.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),l(this,h,t);var n=s.get("alux.logger.["+t+"].level");n?(l(this,g,v.levels[n]),a(this,g)||l(this,g,v.globalLevel)):l(this,g,v.globalLevel)}return o(e,[{key:"level",value:function(){if(0!==arguments.length){var e=v.levels[arguments[0]];if(!e)throw new Error("alux.logger.invalid_level["+arguments[0]+"]");l(this,g,e),s.set("alux.logger.["+a(this,h)+"].level",arguments[0],1800)}return a(this,g).label}},{key:"fatal",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];d.apply(void 0,[a(this,h),a(this,g),v.levels.fatal,e].concat(r))}},{key:"error",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];d.apply(void 0,[a(this,h),a(this,g),v.levels.error,e].concat(r))}},{key:"warn",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];d.apply(void 0,[a(this,h),a(this,g),v.levels.warn,e].concat(r))}},{key:"info",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];d.apply(void 0,[a(this,h),a(this,g),v.levels.info,e].concat(r))}},{key:"debug",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];d.apply(void 0,[a(this,h),a(this,g),v.levels.debug,e].concat(r))}},{key:"trace",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];d.apply(void 0,[a(this,h),a(this,g),v.levels.trace,e].concat(r))}}]),e}();c.getLogger=function(e){return v.loggers[e]||(v.loggers[e]=new m(e)),v.loggers[e]},c.level=function(){var e;if(1===arguments.length){var t=v.levels[arguments[0]];if(!t)throw new Error("alux.logger.invalid_level["+arguments[0]+"]");for(var r in v.globalLevel=t,s.set("alux.logger.level",arguments[0],1800),v.loggers){var n=v.loggers[r];n.level(arguments[0])}}else if(2===arguments.length){var o=c.getLogger(arguments[0]);return o.level(arguments[1]),o.level()}return null===(e=v.globalLevel)||void 0===e?void 0:e.label};var y,p={},w={};w.events={},w.events.ready={completed:!1,listeners:[]},p.on=function(e,t){var r=w.events[e];if(!r)throw new Error("alux.events.unknown_event["+e+"]");if("function"!=typeof t)throw new Error("alux.events.invalid_callback");return r.completed?t():r.listeners.push(t),p},y=function(){w.events.ready.completed=!0,w.events.ready.listeners.length>0&&w.events.ready.listeners.map((function(e){e()}))},"complete"===document.readyState?y():"function"==typeof document.addEventListener?document.addEventListener("DOMContentLoaded",y,!1):"function"==typeof document.attachEvent&&document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&y()}));var b={};function k(e,t){var r=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw logger.error("alux.http.xmlhttp_creation_error",e),Error("alux.http.xmlhttp_creation_error")}}}();return r.onreadystatechange=function(){4!=r.readyState&&"complete"!==r.readyState||(200==r.status?e(r.responseText):t({type:"http",code:r.status,message:r.status+" ("+r.statusText+")"}))},r}b.request=function(e,t){if("string"!=typeof e||!e)throw new Error("alux.http.null_url");return t||(t={}),t.method||(t.method="GET"),new Promise((function(r,n){var o=k(r,n);o.open(t.method,e,!1!==t.async),"GET"!==t.method&&t.data?o.send(t.data):o.send()}))};var x={random:{}};x.random.tinyId=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},x.random.shortId=function(){return x.random.tinyId()+x.random.tinyId()},x.random.guid=function(){return x.random.shortId()+"-"+x.random.shortId()+"-"+x.random.shortId()+"-"+x.random.shortId()+x.random.shortId()};var E={},L=new WeakMap,M=new WeakMap,A=new WeakMap,T=new WeakMap,_=function(){function e(t){var n;r(this,e),L.set(this,{writable:!0,value:void 0}),M.set(this,{writable:!0,value:void 0}),A.set(this,{writable:!0,value:void 0}),T.set(this,{writable:!0,value:void 0}),l(this,T,x.random.guid()),l(this,M,t.cause),l(this,L,t.module),l(this,A,null!==(n=t.code)&&void 0!==n?n:"alux.error_handler")}return o(e,[{key:"guid",get:function(){return a(this,T)}},{key:"log",value:function(){var e=c.getLogger(a(this,L));"string"==typeof a(this,M)?e.error("["+a(this,T)+"] "+a(this,A)+":"+a(this,M)):a(this,M)?e.error("["+a(this,T)+"] "+a(this,A),a(this,M)):e.error("["+a(this,T)+"] "+a(this,A))}},{key:"render",value:function(e){var r=null;e&&"body"!==e?"string"==typeof e?r=document.querySelector(e):"object"===t(e)&&(r=e):r=document.body,this.log(),r&&(r.innerHTML='<div class="badge badge-error">                <div class="header">Atention!</div>                <div class="content">An error has occurred</div>                <div class="details">'+a(this,T)+"</div>            </div>")}}]),e}();E.create=function(e){return new _(e)};var S="fragment",I={fragments:{}},j=c.getLogger(S),W=new WeakMap,F=new WeakMap,R=new WeakMap,O=function(){function e(t,n,o){r(this,e),W.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0}),R.set(this,{writable:!0,value:void 0}),l(this,W,t),l(this,F,n),l(this,R,o)}return o(e,[{key:"name",get:function(){return a(this,W)}},{key:"serve",value:function(e){var t=this,r=this,n=null;return e&&"body"!==e?"string"==typeof e&&(n=document.querySelector(e)):n=document.body,n?new Promise((function(e,o){b.request(a(t,F),{method:"GET"}).then((function(t){var r=e(t);n.innerHTML=r||t})).catch((function(e){o(E.create({module:S,code:"alux.fragment.serve_error["+r.name+"]",cause:e}))}))})):Promise.reject(E.create({module:S,code:"alux.fragment.serve.target_not_found["+e+"]"}))}}]),e}(),P=function(e){if("string"==typeof e){var t=I.fragments[e];if(!t)throw new Error("alux.fragment.unknown_fragment["+e+"]");return t}};P.register=function(e,t,r){j.debug("Registering fragment. name="+e);var n=new O(e,t,r);return I.fragments[e]=n,n};var q={};function G(){return 1===arguments.length&&!0===arguments[0]?{major:q.version.major,minor:q.version.minor,patch:q.version.patch}:"v"+q.version.major+"."+q.version.minor+"."+q.version.patch}return q.version={major:1,minor:0,patch:0},console.log("%cAlux Framework "+G(),"color: #64dd17;"),e.cookies=s,e.events=p,e.fragment=P,e.http=b,e.logger=c,e.ready=function(e){p.on("ready",e)},e.version=G,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=alux.min.js.map
